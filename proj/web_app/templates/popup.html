<script src="https://cdn.jsdelivr.net/npm/inputmask@5.0.7/dist/inputmask.min.js"></script>

<style>
    .container_popup{
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 999;
        background-color: rgba(0, 0, 0, 0.5);
    }
    .container_popup > form{
        margin-top: 200px;
    }
    ::-moz-focus-inner {
        padding: 0;
        border: 0;
      }
      
      :-moz-placeholder {
        color: #bcc0c8 !important;
      }
      
      ::-webkit-input-placeholder {
        color: #bcc0c8;
      }
      
      :-ms-input-placeholder {
        color: #bcc0c8 !important;
      }
      

      
      input, textarea, select, label {
        font-family: inherit;
        font-size: 12px;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }
      
      .login {
        margin: 50px auto;
        padding: 18px 20px;
        width: 400px;
        background: #575858;
        background-clip: padding-box;
        border: 1px solid #172b4e;
        border-bottom-color: #142647;
        border-radius: 5px;
        background-image: -webkit-radial-gradient(cover, #e2e7f0, #fdfdfd);
        background-image: -moz-radial-gradient(cover, #e2e7f0, #fdfdfd);
        background-image: -o-radial-gradient(cover, #e2e7f0, #fdfdfd);
        background-image: radial-gradient(cover, #e2e7f0, #fdfdfd);
        -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), inset 0 0 1px 1px rgba(255, 255, 255, 0.1), 0 2px 10px rgba(0, 0, 0, 0.5);
        box-shadow: inset 0 1px rgba(255, 255, 255, 0.3), inset 0 0 1px 1px rgba(255, 255, 255, 0.1), 0 2px 10px rgba(0, 0, 0, 0.5);
      }
      .login > h1 {
        margin-bottom: 20px;
        font-size: 16px;
        font-weight: bold;
        color: rgb(180, 180, 180);
        text-align: center;
        text-shadow: 0 -1px rgba(0, 0, 0, 0.4);
      }
      
      .login-input {
        display: block;
        width: 100%;
        height: 37px;
        margin-bottom: 20px;
        padding: 0 9px;
        color: white;
        text-shadow: 0 1px black;
        background: #575858;
        border: 1px solid #15243b;
        border-top-color: #0d1827;
        border-radius: 4px;
        background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
        background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
        background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
        background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0));
        -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.2);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.2);
        letter-spacing: 1px;
      }
      .login-input:focus {
        outline: 0;
        background-color: #575858;
        -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 0 4px 1px rgba(255, 255, 255, 0.6);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3), 0 0 4px 1px rgba(255, 255, 255, 0.6);
      }
      .lt-ie9 .login-input {
        line-height: 35px;
      }
      
      .login-submit {
        display: block;
        width: 100%;
        height: 37px;
        margin-bottom: 15px;
        font-size: 14px;
        font-weight: bold;
        color: #294779;
        text-align: center;
        text-shadow: 0 1px rgba(255, 255, 255, 0.3);
        background: #575858;
        background-clip: padding-box;
        border: 1px solid #284473;
        border-bottom-color: #223b66;
        border-radius: 4px;
        cursor: pointer;
        background-image: -webkit-linear-gradient(top, #e8fa4b, #d4d107);
        background-image: -moz-linear-gradient(top, #e8fa4b, #d4d107);
        background-image: -o-linear-gradient(top, #e8fa4b, #d4d107);
        background-image: linear-gradient(to bottom, #e8fa4b, #d4d107);
        -webkit-box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), inset 0 0 7px rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.15);
        box-shadow: inset 0 1px rgba(255, 255, 255, 0.5), inset 0 0 7px rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.15);
      }
      .login-submit:active {
        background: #a4c2f3;
        -webkit-box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.4), 0 1px rgba(255, 255, 255, 0.1);
        box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.4), 0 1px rgba(255, 255, 255, 0.1);
      }
      
      .login-help {
        text-align: center;
      }
      .login-help > a {
        font-size: 11px;
        color: #d4deef;
        text-decoration: none;
        text-shadow: 0 -1px rgba(0, 0, 0, 0.4);
      }
      .login-help > a:hover {
        text-decoration: underline;
      }
      .close_btn{
        right: 0;
        top: 0;
        font-size: 25px;
        color: white;
        width: 35px;
        height: 35px;
        margin-left: 105%;
        margin-top: -10%;
        padding: 0;
        text-align: center;
        border-radius: 50%;
        padding-bottom: 20px;
      }
      .close_btn:hover{
        cursor: pointer;
      }
      .hidden{
        display: none;
      }
</style>

<div class="container_popup hidden">
      <form action="" class="login" method="post" onsubmit="return validateForm()" id="callbackForm">
        {% csrf_token %}
        <div class="close_btn" onclick="closePopUp()">x</div>
    <h1>Заказать звонок</h1>
    <input type="text" name="name" class="login-input" placeholder="Ваше имя" autofocus>
    <input type="text" name="phone" class="login-input" placeholder="Ваш телефон">
    <input type="submit" value="Заказать звонок" class="login-submit">
    
  </form>


</div>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var phoneInput = document.querySelector('input[name="phone"]');
    var inputmask = new Inputmask("8(999)999-99-99");
    inputmask.mask(phoneInput);

    let closeBtn = document.getElementsByClassName('close_btn')[0];
    closeBtn.addEventListener("click", closePopUp);

    function validateForm() {
      const name = document.forms["callbackForm"]["name"].value;
      const phone = document.forms["callbackForm"]["phone"].value;
  
      if (name === "" || phone === "") {
        openPopup('validationPopup');
        return false;  // Не отправляем форму
      }
  
      return true;  // Отправляем форму
    }

  });

  function validateForm() {
    const name = document.forms["callbackForm"]["name"].value;
    const phone = document.forms["callbackForm"]["phone"].value;

    if (name === "" || phone === "") {
      openPopup('validationPopup');
      return false;  // Не отправляем форму
    }

    return true;  // Отправляем форму
  }

  function openPopup(popupId) {
    document.getElementById(popupId).style.display = "block";
    // Закрываем попап через 5 секунд
    setTimeout(function() {
      closePopup(popupId);
    }, 5000);
  }


  function closePopUp() {
    let containerPopup = document.querySelector('.container_popup');
    containerPopup.classList.add('hidden');
  }



</script>