{% extends 'blog/base.html' %}
{% block content %}
{% load static %}


<style>
li{
	list-style: circle, black !important;
    font-size: 15px;
    font-weight: 500;
    color: #3e3d3d;
}

</style>

<script>

    function getCSRFТoken() {
        return document.querySelector('[name=csrfmiddlewaretoken]').value;
    }

    function updateViewArticle(answer){
        $.post("{% url 'update_like_article' %}", 
            {
                csrfmiddlewaretoken: getCSRFТoken(),
                pk: "{{article.pk}}",
                answer: answer
            }, 
            function(data){
                $("#block-like").text(data.like);
                $("#block-dislike").text(data.dislike);
            }
        )
    }


</script>
{% csrf_token %}
<section class="blog_area single-post-area section-padding">
    <div class="container">
       <div class="row">
          <div class="col-lg-8 posts-list">
            <!--ARTICLE BLOCK-->
             <div class="single-post">
                <div class="feature-img">
                   <img class="img-fluid" src="{{article.image.url}}" alt="">
                </div>
                
                <div class="blog_details">
                   <h1 style="font-size: 26px; font-weight: bold;">{{article.title}}
                   </h1>
                   <ul class="blog-info-link mt-3 mb-4">
                      <li style="list-style: none;"><a style="color: #999 !important"><i class="fa fa-eye" aria-hidden="true"></i> {{article.views}}</a></li>
                      <li style="list-style: none;"><a style="color: #999 !important" onclick="updateViewArticle(1)"><i class="fa fa-thumbs-up"></i> <span id="block-like"> {{article.likes}}</span></a><a href="#"> </li>
                        <li style="list-style: none;"><a style="color: #999 !important" onclick="updateViewArticle(0)"><i class="fa fa-thumbs-down"></i><span id="block-dislike">{{article.dis_likes}}</span></a></li>
                   </ul>
                   {{article.article|safe}}
                </div>
             </div>
            <!--END ARTICLE BLOCK-->

             <!--NAVIGATOR -->
             <div class="navigation-top">
                <div class="d-sm-flex justify-content-between text-center">
                   <p class="like-info"><span class="align-middle"><i class="fa fa-heart"></i></span> {{article.likes}} Пользователь (я) оценили эту запись</p>
                   <div class="col-sm-4 text-center my-2 my-sm-0">

                   </div>
                   <ul class="blog-info-link">
                      <li><a ><i class="fa fa-pencil"></i>{{article.created_at}}</a></li>
                   </ul>
                </div>
                <div class="navigation-area">
                   <div class="row">
                     
                     {% if  prev %}
                                               
                     <div class="col-lg-6 col-md-6 col-12 nav-left flex-row d-flex justify-content-start align-items-center">
                         <div class="thumb">
                            <a href="{{ prev.get_absolute_url }}">
                               <img class="img-fluid" src="{{prev.image.url}}" alt="" width="100px">
                            </a>
                         </div>
                         <div class="arrow">
                            <a href="{{ prev.get_absolute_url }}">
                               <span class="lnr text-white ti-arrow-left"></span>
                            </a>
                         </div>
                         <div class="detials">
                            <p>Пред. пост</p>
                            <a href="{{ prev.get_absolute_url }}">
                               <h4>{{prev.title}}</h4>
                            </a>
                         </div>
                     </div>
                     {% endif %}
                     
                     {% if next %}
                                               
                     <div class="col-lg-6 col-md-6 col-12 nav-right flex-row d-flex justify-content-end align-items-center">   
                        <div class="detials">
                            <p>След. пост</p>
                            <a href="{{next.get_absolute_url}}">
                               <h4>{{next.title}}</h4>
                            </a>
                         </div>
                         <div class="arrow">
                            <a href="{{next.get_absolute_url}}">
                               <span class="lnr text-white ti-arrow-right"></span>
                            </a>
                         </div>
                         <div class="thumb">
                            <a href="{{next.get_absolute_url}}">
                               <img class="img-fluid" src="{{next.image.url}}" alt="" width="100px">
                            </a>
                         </div>
                     </div>
                     {% endif %}
                   </div>
                </div>
             </div>
             <!--END NAVIGATOR-->




          </div>
        {% include 'blog/right_nav/nav.html' %}
       </div>
    </div>
 </section>
{% endblock %}
